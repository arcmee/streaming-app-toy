# Socket.IO API 명세

이 문서는 스트리밍 서버의 실시간 채팅을 위한 Socket.IO API를 설명합니다.

## 1. 서버 접속 정보

-   **URL**: `http://localhost:3000`
    -   서버는 기본적으로 3000번 포트를 사용합니다. (`PORT` 환경 변수로 변경 가능)
    -   CORS는 현재 모든 출처(`*`)를 허용하도록 설정되어 있습니다.

## 2. 이벤트 상세

### 클라이언트 → 서버 (Client → Server)

| 이벤트 이름     | 페이로드 (Payload)                                       | 설명                                           |
| --------------- | -------------------------------------------------------- | ---------------------------------------------- |
| `joinRoom`      | `streamId: string`                                       | 특정 스트림의 실시간 채팅방에 참여합니다.      |
| `leaveRoom`     | `streamId: string`                                       | 참여 중인 채팅방에서 나갑니다.                 |
| `sendMessage`   | `{ streamId: string, text: string, userId: string }`     | 채팅 메시지를 서버로 전송합니다.               |

### 서버 → 클라이언트 (Server → Client)

| 이벤트 이름    | 페이로드 (Payload)                                       | 설명                                                               |
| -------------- | -------------------------------------------------------- | ------------------------------------------------------------------ |
| `newMessage`   | `ChatMessage` (Prisma 모델)                              | 성공적으로 처리된 새로운 메시지를 채팅방의 모든 클라이언트에게 전송합니다. |
| `error`        | `{ message: string }`                                    | `sendMessage` 처리 중 오류 발생 시, 해당 클라이언트에게만 오류를 전송합니다. |

---
*참고: `ChatMessage` 페이로드의 정확한 구조는 `prisma/schema.prisma` 파일의 `ChatMessage` 모델을 참조하십시오.*
